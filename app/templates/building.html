{% extends "base.html" %}

{% block content %}
<h1>{{ building.name }}</h1>
<p><strong>Description:</strong> {{ building.description }}</p>
<p><strong>Village:</strong> <a href="{{ url_for('view_village', village_id=building.village.id) }}">{{ building.village.name }}</a></p>

<h2>Projects</h2>
{% if building.projects.all() %}
    <ul>
    {% for project in building.projects %}
        <li><a href="{{ url_for('view_project', project_id=project.id) }}">{{ project.name }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No projects yet.</p>
{% endif %}

<a href="{{ url_for('add_project', building_id=building.id) }}" class="btn btn-primary">Add Project</a>
<a href="{{ url_for('edit_building', building_id=building.id) }}" class="btn btn-warning">Edit Building</a>
<form action="{{ url_for('delete_building', building_id=building.id) }}" method="POST" style="display: inline;">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this building?')">Delete Building</button>
</form>
<a href="{{ url_for('view_village', village_id=building.village.id) }}" class="btn btn-secondary">Back to Village</a>
{% endblock %}